<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Discounted Invoice Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        label, select, input {
            display: block;
            margin: 10px 0;
        }
        .item-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }
        input[type="number"] {
            width: 48%;
        }
        button {
            margin: 20px 0;
        }
        table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        @media (max-width: 600px) {
            .item-row {
                flex-direction: column;
            }
            input[type="number"] {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <h1>Discounted Invoice Calculator</h1>

    <label for="discount">Select Discount Value:</label>
    <select id="discount" name="discount" onchange="updateAllDiscounts()">
        <option value="15">15%</option>
        <option value="30">30%</option>
    </select>

    <h2>Invoice Items</h2>
    <div id="item-list"></div>
    <button type="button" onclick="addItem()">Add Item</button>
	<hr/>
    <h3>Total Price: <span id="total-price">0.00</span></h3>
    <h3>Total Discount: <span id="total-discount">0.00</span></h3>
	<hr/>
    <h3>Sub Total: <span id="sub-total">0.00</span></h3>
    <h3>PB1 Tax (10%): <span id="pb1-tax">0.00</span></h3>
    <h3>SC Tax (5%): <span id="sc-tax">0.00</span></h3>
	<hr/>
    <h2>Total to be Paid: <span id="final-total">0.00</span></h2>

    <script>
        let items = [];

        function addItem() {
            const itemList = document.getElementById('item-list');

            const itemRow = document.createElement('div');
            itemRow.classList.add('item-row');

            const priceInput = document.createElement('input');
            priceInput.type = 'number';
            priceInput.placeholder = 'Enter item price';
            priceInput.min = '0';
            priceInput.step = '0.01';
            priceInput.oninput = () => updateDiscount(priceInput, discountInput);

            const discountInput = document.createElement('input');
            discountInput.type = 'number';
            discountInput.placeholder = 'Discount value';
            discountInput.readOnly = true;

            itemRow.appendChild(priceInput);
            itemRow.appendChild(discountInput);
            itemList.appendChild(itemRow);

            items.push({ priceInput, discountInput });
        }

        function updateDiscount(priceInput, discountInput) {
            const discount = parseFloat(document.getElementById('discount').value);
            const price = parseFloat(priceInput.value);
            if (!isNaN(price)) {
                const discountAmount = price * (discount / 100);
                discountInput.value = discountAmount.toFixed(2);
                updateTotals();
            }
        }

        function updateAllDiscounts() {
            items.forEach(({ priceInput, discountInput }) => {
                updateDiscount(priceInput, discountInput);
            });
        }

        function updateTotals() {
            let totalPrice = 0;
            let totalDiscount = 0;
            items.forEach(({ priceInput, discountInput }) => {
                const price = parseFloat(priceInput.value);
                const discountAmount = parseFloat(discountInput.value);
                if (!isNaN(price) && !isNaN(discountAmount)) {
                    totalPrice += price;
                    totalDiscount += discountAmount;
                }
            });

			const subTotal = totalPrice - totalDiscount
            const pb1Tax = subTotal * 0.1;
            const scTax = subTotal * 0.05;
            const finalTotal = totalPrice - totalDiscount + pb1Tax + scTax;
			
            document.getElementById('total-price').textContent = totalPrice.toFixed(2);
            document.getElementById('total-discount').textContent = totalDiscount.toFixed(2);
            document.getElementById('sub-total').textContent = subTotal.toFixed(2);
            document.getElementById('pb1-tax').textContent = pb1Tax.toFixed(2);
            document.getElementById('sc-tax').textContent = scTax.toFixed(2);
            document.getElementById('final-total').textContent = finalTotal.toFixed(2);
        }
    </script>
</body>
</html>
